xml
{% extends "base.html" %}

{% block title %}Administración de Usuarios - Netflix{% endblock %}

{% block content %}
<style>
    .admin-header {
        background: linear-gradient(to right, #e50914, #831010);
        padding: 2rem;
        border-radius: 8px;
        margin-bottom: 2rem;
    }
    .users-table {
        background-color: #1a1a1a;
        padding: 2rem;
        border-radius: 8px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        padding: 0.75rem;
        text-align: left;
        border-bottom: 1px solid #333;
    }
    th {
        background-color: #2a2a2a;
        color: #e50914;
    }
    .status-active {
        color: #28a745;
        font-weight: bold;
    }
    .status-inactive {
        color: #dc3545;
        font-weight: bold;
    }
    .action-buttons {
        display: flex;
        gap: 0.5rem;
    }
    .btn-sm {
        padding: 0.375rem 0.75rem;
        font-size: 0.875rem;
    }
</style>

<div class="admin-header">
    <h1>Panel de Administración</h1>
    <p>Gestión de usuarios del sistema</p>
</div>

<div class="users-table">
    <h2>Lista de Usuarios</h2>
    <p>Total de usuarios: <strong>{{ users|length }}</strong></p>

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Username</th>
                <th>Email</th>
                <th>Plan</th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user.id }}</td>
                <td>{{ user.username }}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.subscription_type.upper() }}</td>
                <td>
                    {% if user.is_active %}
                        <span class="status-active">ACTIVO</span>
                    {% else %}
                        <span class="status-inactive">INACTIVO</span>
                    {% endif %}
                </td>
                <td>
                    <div class="action-buttons">
                        {% if user.is_active %}
                        <form method="POST" action="{{ url_for('deactivate_user', user_id=user.id) }}" style="display:inline;">
                            <button type="submit" class="btn btn-secondary btn-sm" onclick="return confirm('¿Desactivar este usuario?')">
                                Desactivar
                            </button>
                        </form>
                        {% endif %}
                        
                        <form method="POST" action="{{ url_for('delete_user', user_id=user.id) }}" style="display:inline;">
                            <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('¿Eliminar este usuario permanentemente?')">
                                Eliminar
                            </button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div style="margin-top: 2rem; display: flex; gap: 1rem;">
        <a href="{{ url_for('audit_users') }}" class="btn btn-secondary">Ver Auditoría de Usuarios</a>
        <a href="{{ url_for('audit_payments') }}" class="btn btn-secondary">Ver Auditoría de Pagos</a>
    </div>
</div>
{% endblock %}